<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul Literasi AI - AdaptLabo</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent:#667eea}
    *{box-sizing:border-box}
    body{font-family:Inter,Segoe UI,system-ui,Arial;background:var(--bg);color:#122}
    header{background:linear-gradient(90deg,var(--accent),#764ba2);color:#fff;padding:1rem}
    .container{max-width:1000px;margin:1rem auto;padding:1rem}
    .card{background:var(--card);border-radius:12px;padding:1rem;box-shadow:0 6px 18px rgba(16,24,40,.06);margin-bottom:1rem}
    h1{font-size:1.25rem}
    .modules{display:grid;grid-template-columns:1fr 320px;gap:1rem}
    @media(max-width:900px){.modules{grid-template-columns:1fr}}
    .module-list .module{padding:.8rem;border-radius:10px;background:#fbfcff;border:1px solid #eef2ff;margin-bottom:.6rem;display:flex;justify-content:space-between;align-items:center}
    .module-list .module .meta{max-width:70%}
    .btn{background:var(--accent);color:#fff;padding:.45rem .7rem;border-radius:8px;border:none;cursor:pointer}
    .outline-btn{background:transparent;border:1px solid #e6e9ef;padding:.45rem .7rem;border-radius:8px;cursor:pointer}
    .lesson{padding:.6rem 0;border-top:1px dashed #eef2ff}
    .small{font-size:.9rem;color:#555}
    .progress{height:10px;background:#e9eefb;border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#764ba2);width:0}
    .backlink{color:#fff;opacity:.95;text-decoration:none}
  </style>
</head>
<body>
  <header>
    <div style="max-width:1000px;margin:0 auto;display:flex;justify-content:space-between;align-items:center">
      <div style="display:flex;align-items:center;gap:.6rem"><i class="fas fa-brain"></i><strong>AdaptLabo</strong></div>
      <nav><a class="backlink" href="#" id="openDashboard">← Kembali ke Dashboard</a></nav>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h1>Modul Literasi AI untuk Guru</h1>
      <p class="small">Seri modul singkat untuk membekali guru dengan dasar AI, etika, teknik prompting, studi kasus, dan panduan implementasi nyata di kelas. Progress tersimpan lokal (demo) dan bisa diintegrasikan ke AdaptLabo.</p>
      <div style="display:flex;gap:1rem;margin-top:.8rem;align-items:center">
        <div style="flex:1">
          <div class="small">Progress keseluruhan</div>
          <div class="progress" style="margin-top:.4rem"><i id="overallBar"></i></div>
        </div>
        <div style="width:150px;text-align:right"><div class="small">Selesai: <strong id="doneCount">0</strong>/<span id="totalCount">0</span></div></div>
      </div>
    </section>

    <div class="modules">
      <div class="card module-list">
        <h3>Daftar Modul</h3>

        <!-- Module entries generated by JS -->
        <div id="modulesContainer" style="margin-top:.6rem"></div>
      </div>

      <aside class="card">
        <h3>Ringkasan & Panduan Implementasi</h3>
        <p class="small">Gunakan modul ini sebagai bahan pembelajaran mandiri atau terintegrasi dalam RPP dan kegiatan kelas. Setiap modul menyertakan: tujuan, durasi estimasi, aktivitas kelas, dan rubrik penilaian sederhana.</p>

        <div style="margin-top:.8rem">
          <button id="exportProgress" class="outline-btn">Ekspor progress (JSON)</button>
          <button id="importProgress" class="outline-btn" style="margin-left:.4rem">Impor progress</button>
        </div>

        <hr style="margin: .8rem 0;border:none;border-top:1px dashed #eef2ff">
        <h4>Implementasi nyata (contoh singkat)</h4>
        <ol class="small">
          <li><strong>AI Dasar:</strong> Perkenalan 30 menit + demo chatbot untuk sesi tanya jawab singkat.</li>
          <li><strong>Etika:</strong> Diskusi kasus nyata 45 menit, bahas bias dan privasi data siswa.</li>
          <li><strong>Prompting:</strong> Latihan membuat prompts untuk membuat rubrik dan soal otomatis (40 menit).</li>
          <li><strong>Studi Kasus:</strong> Proyek mini: gunakan AI untuk memberikan feedback tulisan siswa (2x45 menit).</li>
        </ol>

        <hr style="margin: .8rem 0;border:none;border-top:1px dashed #eef2ff">
        <p class="small">Catatan: untuk integrasi ke dashboard AdaptLabo, modul ini membaca dan menulis kunci <code>adaptlabo_user</code> di <code>localStorage</code> (demo). Jika menggunakan backend, sesuaikan API untuk menyimpan progress.</p>
      </aside>
    </div>

  </main>

  <script>
  // Module definitions
  const modules = [
    {
      id:'m1', title:'Dasar AI', minutes:30,
      objectives:['Memahami pengertian AI','Membedakan ML vs rule-based','Contoh penerapan di pendidikan'],
      activities:['Presentasi 15 menit','Demo chatbot 15 menit'],
      implementasi:'Perlihatkan contoh chatbot yang menjawab pertanyaan sederhana, minta siswa membuat 1 pertanyaan dan analisis jawaban.'
    },
    {
      id:'m2', title:'Etika AI', minutes:45,
      objectives:['Memahami isu bias','Privasi data siswa','Tanggung jawab penggunaan AI'],
      activities:['Diskusi studi kasus 30 menit','Refleksi 15 menit'],
      implementasi:'Gunakan studi kasus tentang bias penilaian otomatis; diskusikan bagaimana data mempengaruhi model.'
    },
    {
      id:'m3', title:'Prompting (menghasilkan instruksi yang efektif)', minutes:40,
      objectives:['Menulis prompt yang jelas','Mengontrol format output model','Membuat rubrik menggunakan AI'],
      activities:['Latihan menulis prompt 30 menit','Peer-review prompt 10 menit'],
      implementasi:'Beri tugas membuat prompt untuk menilai esai singkat; bandingkan hasil otomatis dengan rubrik guru.'
    },
    {
      id:'m4', title:'Studi Kasus: Penerapan AI di Kelas', minutes:90,
      objectives:['Analisis kasus penerapan','Merancang intervensi berbasis AI','Mengevaluasi efek pembelajaran'],
      activities:['Presentasi studi kasus 30 menit','Rancang proyek mini 60 menit'],
      implementasi:'Siswa merancang proyek mini menggunakan AI (mis. feedback tulisan, pembuatan soal adaptif).'
    }
  ];

  // localStorage key same as dashboard for easy integration
  const STORAGE_KEY = 'adaptlabo_user';

  function ensureUser(){
    let u = JSON.parse(localStorage.getItem(STORAGE_KEY) || 'null');
    if(!u){
      u = {id:'guru_demo', modulesTotal: modules.length, modulesDone: 0, completed: {}};
      localStorage.setItem(STORAGE_KEY, JSON.stringify(u));
    } else {
      // ensure keys exist
      u.modulesTotal = modules.length;
      if(!u.completed) u.completed = {};
      localStorage.setItem(STORAGE_KEY, JSON.stringify(u));
    }
    return u;
  }

  function renderModules(){
    const container = document.getElementById('modulesContainer');
    container.innerHTML = '';
    const user = ensureUser();
    modules.forEach(m => {
      const done = !!user.completed[m.id];
      const el = document.createElement('div'); el.className='module';
      el.innerHTML = `<div class="meta"><strong>${m.title}</strong><div class="small">Durasi: ${m.minutes} menit • Tujuan: ${m.objectives.join(', ')}</div></div><div style="text-align:right"><button class="btn" data-id="${m.id}">${done? 'Selesai' : 'Buka'}</button><div class="small" style="margin-top:.4rem">${done? '✓' : ''}</div></div>`;
      container.appendChild(el);
    });
    document.querySelectorAll('.module .btn').forEach(b=>b.addEventListener('click', openModule));
    updateProgressUI();
  }

  function updateProgressUI(){
    const user = ensureUser();
    const doneCount = Object.keys(user.completed||{}).filter(k=>user.completed[k]).length;
    document.getElementById('doneCount').textContent = doneCount;
    document.getElementById('totalCount').textContent = modules.length;
    const pct = Math.round((doneCount / modules.length) * 100);
    document.getElementById('overallBar').style.width = pct + '%';
  }

  function openModule(ev){
    const id = ev.currentTarget.dataset.id;
    const m = modules.find(x=>x.id===id);
    const modal = document.createElement('div');
    modal.style.position='fixed';modal.style.inset=0;modal.style.background='rgba(0,0,0,.4)';modal.style.display='flex';modal.style.alignItems='center';modal.style.justifyContent='center';
    modal.innerHTML = `<div style='background:#fff;border-radius:12px;padding:1rem;max-width:720px;width:100%;max-height:90vh;overflow:auto'>
      <h3>${m.title}</h3>
      <p class="small">Durasi: ${m.minutes} menit</p>
      <h4>Tujuan</h4><ul>${m.objectives.map(o=>`<li>${o}</li>`).join('')}</ul>
      <h4>Aktivitas Kelas</h4><ol>${m.activities.map(a=>`<li>${a}</li>`).join('')}</ol>
      <h4>Implementasi</h4><p class="small">${m.implementasi}</p>
      <div style='display:flex;gap:.5rem;margin-top:1rem;justify-content:flex-end'>
        <button id='markDone' class='btn'>Tandai Selesai</button>
        <button id='closeModal' class='outline-btn'>Tutup</button>
      </div>
    </div>`;
    document.body.appendChild(modal);
    document.getElementById('closeModal').addEventListener('click', ()=>{ modal.remove(); });
    document.getElementById('markDone').addEventListener('click', ()=>{
      const user = ensureUser(); user.completed[id] = true; user.modulesDone = Object.keys(user.completed).filter(k=>user.completed[k]).length; localStorage.setItem(STORAGE_KEY, JSON.stringify(user));
      modal.remove(); renderModules();
    });
  }

  // Import / Export
  document.getElementById('exportProgress').addEventListener('click', ()=>{
    const u = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
    const blob = new Blob([JSON.stringify(u, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'adaptlabo_progress.json'; a.click(); URL.revokeObjectURL(url);
  });
  document.getElementById('importProgress').addEventListener('click', ()=>{
    const inp = document.createElement('input'); inp.type='file'; inp.accept='application/json'; inp.onchange = async e=>{
      const f = e.target.files[0]; if(!f) return; const txt = await f.text(); try{ const data = JSON.parse(txt); localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); alert('Progress diimpor.'); renderModules(); }catch(err){ alert('File tidak valid.'); }
    }; inp.click();
  });

  // Back to dashboard (attempt to open in same site) - in demo just alert
  document.getElementById('openDashboard').addEventListener('click', (e)=>{ e.preventDefault(); alert('Di demo ini: buka file Adaptlabo Dashboard yang sudah Anda simpan. Jika ingin integrasi: pasang kedua file pada domain yang sama agar keduanya dapat berbagi localStorage.'); });

  // Init
  renderModules();
  </script>
</body>
</html>